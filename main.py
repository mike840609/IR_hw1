from __future__ import print_function
from Model.IR import *
import os

from Model.DocOperator import DocOperator
from collections import Counter

from Model.TrainingClassHolder import TrainingClassHolder
from Model.Cluster import Cluster
# import nltk


#  R06725054
# main program  ========================================================================================================
def main():
    
    # lemmatization
    # nltk.download('wordnet')

    #  initialize obj
    
    # you can use the url or local file to initialize object
    # obj = IR_operator('https://ceiba.ntu.edu.tw/course/35d27d/content/28.txt ')

    # hw1 =================================================================================
    # obj = IR_operator('Static_txt/test.txt')
    # obj.tokenization()
    # obj.removeStopWord('Static_txt/stopList.txt')
    # obj.stemming()
    # obj.removeSameWordAndStopWord('Static_txt/stopList.txt')
    # obj.writeResultToFile('result.txt')
    # obj.log()

    # HW2   ==============================================================================
    
    # 1/3  Calculate DocumentFrequency & Generate dictionary.txt =========================  
    
    docOpe_obj = DocOperator("./Static_txt/IRTM/")
    # docOpe_obj = DocOperator("./Static_txt/test/")

    docOpe_obj.genrateDoc()
    docOpe_obj.docFreqCal()
    docOpe_obj.indexingDict()
    docOpe_obj.writeToFile('dictionary.txt')

    # print documents
    print ('Document frequenct task done')
    
    # 2/3 Calctulate TF-IDF & Generate unit vector for terms in each documents's ===========
    docOpe_obj.cal_Tf_Idf()
    # generate term tf_idf for each document
    # docOpe_obj.write_Tf_Idf_ToFile('./Tf-Idf_unit_vector/') 
    print ('tf-idf task done')

    # 3/3 Calculate Consine Similarity between two Doc =======================================
    
    # txt1 = 1
    # txt2 = 2
    # consine_similarity = docOpe_obj.calCosineSimilarity("./Tf-Idf_unit_vector/", txt1 , txt2)
    # print ('file : {}   \nfile : {} \nconsine similarity is : {}'.format(str(txt1) ,str(txt2) ,str(consine_similarity)) )
    # print ('all task done')
    
    # HW3 =====================================================================================
    # trainingData = TrainingClassHolder("./Static_txt/training.txt")
    # result_dict = trainingData.selectFeature(docOpe_obj.doc_list)
    # docOpe_obj.writeDictToFile('output.txt', result_dict)


    # HW4 =====================================================================================
    cluster_obj = Cluster()
    A = cluster_obj.EfficientHAC(docOpe_obj)
    cluster_obj.writeClusterToFile(A)

    # A = [
    # [621, 622], [662, 663], [8, 9], [48, 49], [564, 596], [564, 565], [564, 595], [705, 706], 
    # [943, 944],[195, 229], [195, 230], [848, 849], [926, 928], [101, 106], [305, 309], 
    # [792, 796], [732, 733], [476, 477], [527, 529], [211, 212], [211, 213], [191, 192], 
    # [1034, 1036], [500, 501], [155, 158], [832, 838], [507, 508], [855, 856], [681, 684], 
    # [583, 584], [243, 244], [1085, 1088], [676, 677], [330, 333], [198, 200], [822, 824], 
    # [896, 897], [100, 102], [839, 840], [197, 202], [605, 607], [372, 381], [825, 828], 
    # [1000, 1008], [491, 493], [499, 500], [736, 737], [899, 906], [520, 523], [841, 842], 
    # [54, 55], [969, 970], [911, 912], [821, 822], [547, 546], [89, 88], [954, 955], [231, 235], 
    # [996, 997], [109, 110], [885, 886], [94, 98], [245, 250], [56, 57], [922, 924], [969, 971], 
    # [130, 131], [502, 503], [1084, 1085], [327, 328], [719, 722], [532, 531], [197, 199], 
    # [839, 841], [302, 313], [455, 456], [615, 616], [968, 969], [281, 282], [34, 35], 
    # [1041, 1042], [602, 598], [507, 512], [574, 575], [975, 982], [283, 285], [956, 957], 
    # [498, 499], [95, 105], [765, 768], [576, 583], [440, 439], [351, 362], [867, 868], 
    # [680, 683], [304, 308], [382, 403], [1037, 1035], [731, 732], [319, 322], [135, 136], 
    # [139, 148], [246, 247], [821, 825], [217, 219], [452, 447], [606, 601], [168, 174], 
    # [476, 479], [33, 34], [245, 260], [284, 289], [92, 100], [196, 207], [1039, 1041], 
    # [555, 556], [327, 334], [339, 347], [995, 998], [280, 281], [350, 353], [321, 325], 
    # [833, 843], [56, 71], [574, 576], [438, 442], [776, 777], [458, 462], [802, 803],
    # [572, 577], [602, 606], [1018, 1021], [133, 134], [1020, 1019], [382, 404], 
    # [917, 929], [836, 913], [551, 552], [422, 429], [443, 480], [666, 672], 
    # [705, 709], [836, 936], [935, 937], [695, 701], [351, 371], [130, 137], 
    # [20, 26], [926, 938], [241, 245], [950, 966], [549, 561], [227, 231], 
    # [673, 665], [854, 741], [574, 578], [554, 563], [300, 295], [388, 402], 
    # [670, 668], [392, 408], [610, 615], [25, 24], [682, 685], [454, 481], [397, 401], 
    # [976, 981], [724, 727], [74, 84], [1037, 1038], [704, 705], [118, 125], [320, 327], [413, 438], 
    # [108, 117], [767, 764], [667, 670], [476, 489], [420, 428], [185, 201], [1018, 1026], [454, 502], 
    # [300, 306], [562, 620], [975, 979], [695, 697], [946, 989], [373, 368], [1030, 1033], [316, 321], 
    # [739, 743], [483, 507], [902, 904], [140, 151], [339, 350], [491, 498], [787, 899], [506, 516], 
    # [674, 696], [597, 534], [54, 56], [673, 681], [654, 657], [276, 283], [954, 1018], [175, 198], 
    # [674, 682], [443, 624], [241, 275], [483, 492], [602, 610], [82, 85], [895, 898], [382, 392], 
    # [762, 765], [799, 812], [369, 377], [953, 961], [168, 188], [735, 744], [343, 349], [472, 515], 
    # [1000, 1017], [18, 23], [786, 797], [574, 613], [294, 319], [241, 248], [839, 848], [444, 464], 
    # [933, 946], [1039, 1052], [443, 597], [78, 89], [191, 203], [346, 363], [693, 694], [533, 675], 
    # [420, 430], [168, 196], [262, 296], [246, 257], [560, 562], [573, 644], [223, 292], [324, 419], 
    # [509, 809], [619, 621], [383, 386], [1059, 1060], [965, 967], [348, 364], [659, 661], [273, 284], 
    # [673, 695], [70, 92], [658, 653], [571, 602], [626, 687], [926, 927], [483, 490], [608, 609], 
    # [413, 715], [837, 851], [344, 340], [467, 468], [896, 956], [169, 625], [996, 1002], [1044, 1050], 
    # [968, 976], [635, 704], [954, 985], [254, 258], [526, 627], [626, 827], [153, 156], [533, 674], 
    # [147, 303], [632, 729], [30, 109], [484, 623], [660, 669], [68, 91], [375, 382], [581, 586], 
    # [748, 854], [933, 950], [315, 320], [639, 643], [520, 538], [33, 48], [1, 21], [539, 547], 
    # [766, 767], [667, 676], [167, 186], [680, 720], [339, 509], [587, 590], [376, 380], [571, 605], 
    # [466, 698], [454, 491], [533, 673], [472, 506], [645, 647], [160, 154], [864, 867], [118, 124], 
    # [637, 736], [73, 78], [159, 210], [819, 818], [345, 351], [75, 59], [1057, 1059], [1005, 1020], 
    # [14, 40], [372, 476], [255, 487], [635, 702], [317, 369], [880, 931], [389, 400], [1075, 1077], 
    # [814, 836], [603, 612], [94, 101], [405, 444], [83, 86], [947, 949], [762, 779], [759, 804], [375, 528], 
    # [910, 915], [852, 865], [986, 1061], [338, 494], [536, 592], [54, 62], [799, 896], [608, 633], [821, 833], 
    # [992, 1073], [8, 69], [453, 457], [291, 330], [37, 45], [443, 651], [1044, 1057], [135, 165], [103, 112], 
    # [243, 256], [50, 3], [240, 241], [470, 475], [316, 357], [113, 278], [571, 604], [953, 975], [932, 934], 
    # [725, 721], [526, 559], [339, 413], [907, 911], [157, 486], [337, 654], [262, 466], [816, 883], [646, 794], 
    # [299, 307], [555, 580], [1055, 1058], [522, 525], [266, 269], [571, 637], [763, 761], [1001, 1004], [539, 572], 
    # [1003, 1005], [533, 793], [962, 963], [933, 1000], [343, 352], [389, 396], [703, 713], [619, 636], [830, 829], 
    # [246, 628], [588, 589], [346, 416], [819, 862], [1006, 1040], [211, 218], [574, 629], [792, 1034], [786,802], 
    # [279, 300], [520, 532], [74, 103], [18, 25], [302, 314], [798, 861], [249, 233], [540, 541], [603, 611], 
    # [933, 994], [649, 114], [855, 869], [680, 908], [877, 894], [405, 422], [31, 70], [640, 1076], [266, 268], 
    # [591, 441], [82, 116], [94, 99], [991, 987], [163, 263], [421, 436], [700, 735], [545, 554], [992, 1070], 
    # [194, 750], [769, 775], [427, 783], [483, 505], [454, 495], [193, 205], [343, 359], [945, 953], [551, 560], 
    # [638, 642], [383, 389], [54, 58], [407, 409], [731, 780], [132, 145], [770, 771], [853, 959], [73, 90], 
    # [337, 445], [427, 484],[304, 659], [395, 398], [446, 452], [473, 497], [535, 542], [533, 710], [30, 74], 
    # [788, 790], [972, 977], [190, 223], [339, 472], [317, 423], [331, 345], [191, 227], [581, 599], [660, 699], 
    # [1048, 1082], [510, 265], [372, 405], [113, 431], [593, 738], [273, 293], [719, 723], [414, 437], [1046, 1080], 
    # [410, 449], [384, 543], [968, 973], [526, 536], [649, 689], [68, 104], [1012, 1047], [667, 671], [958, 962], 
    # [255, 454], [770, 774], [135, 242], [571, 603], [754, 757], [279, 297], [786, 807], [18, 33], [813, 820], 
    # [680, 914], [996, 1010], [772, 782], [331,375], [690, 691], [52, 54], [317, 324], [443, 658], [815, 888], 
    # [634, 686], [6, 50], [160, 168], [39, 43], [68, 189], [277, 323], [821, 847], [640, 748], [539, 594], 
    # [752, 964], [81, 79], [711, 742], [115, 341], [343, 348], [214, 222], [574, 614], [759, 1051], [968, 978], 
    # [798, 880], [355, 393], [94, 128], [10, 47], [785, 787], [8, 96], [329, 354], [7, 10], [252, 510], [746, 776], 
    # [459, 461], [455, 630], [14, 127], [286, 379], [526, 544], [1039, 1084], [113, 451], [537, 555], [29, 811], 
    # [332, 172], [262, 662], [130, 217], [518, 522], [27, 649], [999, 1003], [910, 948], [220, 234], [1066, 1081], 
    # [311, 361], [17, 5], [945, 965], [31, 315], [335, 478], [527, 553], [571, 600], [755, 756], [262, 703], 
    # [372, 482], [990, 993], [246, 511], [73, 97], [42, 129], [645, 690], [160, 191], [211, 216], [170, 171], 
    # [339, 753], [823, 939], [784, 800], [640, 739], [521, 617], [986, 992], [830, 844], [214, 225], [719, 724], 
    # [221, 253], [185, 187], [1023, 1043], [346, 483], [799, 935], [75, 120], [426, 745], [608, 860], [786, 795], 
    # [30, 81], [864, 866], [926, 930], [567, 569], [72, 76], [29, 169], [830, 850], [839, 877], [18, 38], [933, 1049], 
    # [261, 270], [448, 453], [383, 384], [549, 808], [149, 153], [1, 51], [537, 539], [204, 294], [397, 638], 
    # [108, 118], [280, 290], [972, 983], [30, 94], [995, 999], [37, 39], [631, 632], [1025, 1027], [185, 679], 
    # [343, 366], [299, 302], [215, 634], [262, 337], [13, 4], [1028, 1046], [752, 884], [115, 460], 
    # [942, 1001], [700, 951], [568, 579], [574, 608], [68, 243], [917, 920], [22, 36], [6, 27], 
    # [1012, 1090], [1039, 1072], [15, 17], [316, 317], [469, 470], [496, 652], [342, 432], [175, 211], [1055, 1056], [1089, 1091], [1069, 1078], [907, 941], [255, 514], [762, 772], [178, 692], [374, 1079], [52, 53], [346, 473], [731, 755], [177, 221], [900, 918], [240, 279], [488, 655], [889, 1013], [22, 28], [821, 826], [747, 789], [1012, 1066], [933, 1064], [355, 360], [872, 881], [876, 879], [133, 272], [646, 846], [834, 873], [1062, 905], [520, 526], [291, 549], [139, 236], [7, 15], [421, 433], [995, 1075], [301, 338], [619, 639], [570, 718], [407, 417], [1011, 1014], [485, 527], [66, 60], [954, 1024], [540, 545], [766, 806], [581, 626], [238, 410], [1065, 1074], [159, 162], [443, 533], [521,714], [126, 226], [367, 378], [249, 336], [144, 387], [921, 940], [923, 1044], [16, 77], [130, 160], [184, 455], [784, 786], [759, 760], [660, 678], [845, 960], [305, 326], [163, 246], [52, 65], [535, 571], [8, 93], [37, 46], [798, 839], [29, 524], [185, 276], [111, 61], [30, 259], [719, 726], [6, 108], [488, 717], [252, 286], [406, 504], [821, 864], [251, 414], [83, 394], [813, 830], [1, 14], [485, 537], [152, 190], [240, 254], [143, 180], [857, 943], [383, 388], [520, 587], [769, 901], [725, 816], [535, 581], [72, 82], [945, 947], [821, 988], [182, 173], [291, 427], [910, 968], [206, 465], [933, 986], [318, 434], [87, 712], [304, 450], [42, 123], [331, 519], [22, 32], [113, 435], [115, 316], [391, 440], [374, 518], [573, 588], [30, 66], [305, 370], [208, 458], [8, 63], [163, 711], [411, 446], [390, 399], [759, 784], [900, 922], [37, 41], [140, 195], [853, 932], [859, 1069], [397, 513], [834, 835], [885, 907], [680, 814], [1068, 1071], [426, 707], [155, 197], [871, 875], [11, 425], [83, 395], [73, 107], [411, 448], [139, 252], [870, 882], [1025, 1031], [1089, 1094], [262, 304], [288, 367], [255, 749],[1039, 1063], [887, 890], [331, 376], [474, 758], [650, 728], [7, 16], [1037, 1053], [298, 299], [30, 95], [648, 1067], [194, 311], [752, 770], [751, 831], [1023, 1028], [130, 159], [858, 817], [418, 762], [135, 155], [646, 799], [339, 517], [1016, 1048], [355, 358], [20, 688], [1039, 1083], [52, 80], [31, 591], [520, 593], [6, 664], [788, 902], [1, 75], [68, 149], [178, 892], [958, 972], [19, 29], [660, 667], [113, 301], [142, 166], [815, 954], [152, 277], [44, 344], [214, 220], [264, 266], [18, 22], [342, 693], [891, 893], [68, 271], [719, 926], [535,582], [273, 287], [573, 574], [52, 73], [485, 567], [759, 766], [857, 876], [224, 746], [373, 415], [147, 185], [291, 318], [132, 133], [115, 372], [923, 991], [485, 540], [885, 910], [143, 267], [754, 791], [193, 209], [175, 228], [170, 206], [530, 558], [6, 72], [1039, 1054], [759, 805], [813, 870], [238, 459], [152, 329], [11, 19], [262, 443], [740, 730], [30, 121], [821, 832], [163, 249], [12, 13], [900, 921], [181, 184], [421, 424], [763, 878], [819, 858], [1023, 1030], [1055, 1089], [215, 488], [952, 990], [573, 619], [138, 167], [521, 788], [646,798], [147, 194], [140, 150], [535, 792], [1, 2], [280, 288], [144, 179], [995, 1007], [1068, 1093], [1006, 1037], [339, 496], [164, 778], [204, 332], [769, 785], [385, 407], [305, 355], [813, 834], [383, 467], [859, 874], [853, 895], [273, 335], [176, 1015], [933, 1065], [821, 857], [44, 365], [7, 631], [147, 251], [130, 141], [113, 115], [801, 823], [239, 237], [224, 418], [731, 740], [374, 650], [656, 909], [139, 208], [752, 754], [8, 126], [535, 573], [31, 83], [356, 1095], [214, 469], [346, 406], [426, 550], [585, 984], [152, 291], [373, 618], [945, 958], [1012, 1039], [1, 7], [1011, 1092], [6, 232], [845, 887], [157, 182], [238, 412], [813, 819], [520, 548], [485, 557], [900, 917], [700, 855], [64, 119], [923, 1032], [916, 925], [1006, 1012], [142, 471], [891, 1062], [305, 391], [420, 1022], [255, 346], [485, 566], [716, 863], [147, 298], [397, 734], [390, 666], [641, 919], [751, 1029], [1016, 1068], [1023, 1087], [181, 773], [11, 113], [974, 1009], [261, 264], [274, 747], [177, 178], [42, 68], [485, 570], [161, 551], [130, 280], [262, 397], [67, 111], [1, 30], [520, 530], [175, 214], [708, 852],[945, 980], [1006, 1045], [815, 853], [138, 144], [813, 872], [142, 474], [521, 769], [215, 273], [759, 952], [6, 12], [130, 140], [262, 660], [1006, 1025], [147, 170], [535, 640], [310, 463], [44, 421], [139, 385], [31, 331], [255, 725], [52, 67], [837, 859], [135, 143], [485, 568], [175, 204], [343, 390], [152, 215], [240, 339], [1, 6], [1006, 1086], [37, 122], [420, 564], [680, 719], [8, 64], [356, 903], [889, 1011], [342, 645], [87, 183], [193, 312], [164, 177], [157, 161], [152, 238], [815, 996], [138, 146], [130, 374], [1023, 1055], [132, 373], [8, 87], [44, 305], [147, 164], [426, 810], [646, 801], [752, 945], [900, 933], [139, 181], [135, 138], [1016, 1023], [485, 520], [751, 923], [648, 916], [310, 763], [700, 731], [274, 521], [139, 152], [31, 44], [175, 261], [20, 37], [889, 995], [680, 900], [240, 255], [1, 20], [885, 942], [130, 147], [641, 708], [8, 18], [11, 383], [163, 716], [837, 1006], [139, 239], [752, 759], [646, 751], [635, 648], [142, 224], [8, 52], [130, 411], [132, 157], [420, 585], [175, 193], [163, 343], [142, 342], [821, 891], [635, 641], [11, 426], [132, 139], [356, 700], [821, 837], [781, 815], [420, 485], [130, 142], [163, 274], [176, 656], [752, 974], [821, 889], [1, 8], [130, 163], [635, 680], [132, 175], [781, 885], [42, 176], [420, 635], [310, 1016], [420, 535], [130, 135], [356, 646], [1, 240], [1, 871], [1, 845], [1, 310], [1, 262], [1, 420], [1, 356], [1, 781], [1, 752], [1, 821], [1, 813], [1, 42], [1, 31], [1, 132], [1, 130], [1, 11]]

    


if __name__ == '__main__':
    main()
    




    
